(function(d,c,b){var a=d.editors.TextEditor.prototype.extend();a.prototype.createElements=function(){this.TEXTAREA=document.createElement("TEXTAREA");this.TEXTAREA.tabIndex=-1;this.textareaStyle=this.TEXTAREA.style;this.textareaStyle.width=0;this.textareaStyle.height=0;this.TEXTAREA_PARENT=document.createElement("DIV");c(this.TEXTAREA_PARENT).addClass("handsontableInputHolder");this.textareaParentStyle=this.TEXTAREA_PARENT.style;this.textareaParentStyle.zIndex="-1";this.TEXTAREA_PARENT.appendChild(this.TEXTAREA);
this.instance.rootElement.appendChild(this.TEXTAREA_PARENT);c(this.TEXTAREA).ckeditor({toolbarGroups:[{name:"clipboard",groups:["undo","selection","clipboard","doctools"]},{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"links"}],removeButtons:"Iframe,Image,Table",enterMode:b.ENTER_BR,shiftEnterMode:b.ENTER_P,on:{instanceReady:function(){this.dataProcessor.writer.selfClosingEnd=">";this.dataProcessor.writer.setRules("br",{indent:!1,breakBeforeOpen:!1,breakAfterOpen:!1,breakBeforeClose:!1,
breakAfterClose:!1})}}})};a.prototype.open=function(){c(this.TEXTAREA).ckeditor().editor.setData("<p>"+this.getValue()+"</p>");d.editors.TextEditor.prototype.open.call(this)};a.prototype.finishEditing=function(a,e,f){var b=c(".cke_dialog");b.length&&b.is(":visible")||d.editors.TextEditor.prototype.finishEditing.call(this,a,e,f)};a.prototype.close=function(a){var b=this.getValue().trim(),c=b.replace(/(<([^>]+)>)/ig,"");b==="<p>"+c+"</p>"&&this.setValue(c);d.editors.TextEditor.prototype.close.call(this,
a)};d.editors.registerEditor("rtfEditor",a)})(Handsontable,jQuery,CKEDITOR);
